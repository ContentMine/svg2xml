<semanticDocument debug="true" xmlns="http://www.xml-cml.org/schema/ami2">
  <fontManager name="simpleFont" filename="src/main/resources/org/xmlcml/graphics/font/simpleFont.xml"/>
  <documentIterator max="999" skipIfExists="raw">
    <documentActionList outDir="${d.rawDirectory}/../out" skipIfExists="${d.outDir}">
      <documentReader filename="${d.rawDirectory}" format="svgPages"/>
      <pageIterator>
        <pageAnalyzer timeout="15000" maxMbyte="5.0">
          <pageVariable name="p.root" value="${d.outDir}/${p.page}"/>
          <pageWriter filename="${p.root}start.svg"/>
          <pageNormalizer 
              normalizeHighCodePoints="true"
              denormalizeFontSizes="true"
              removeUnwantedAttributes="true" 
              applyAndRemoveCumulativeTransforms="true"
              removeImageData="true"
              cleanSVGStyles="true"
              canRotateLandscape="true"
              removeUnitTransforms="true"
              formatDecimalPlaces="3"/>
          <pageStyleProcessor translateClipPathsToPhysicalStyles="true" removeDefs="true"/> 
          <pageWriter filename="target/pageStyle1clipPaths.svg"/>              
          <pathNormalizer 
              removeDuplicatePaths="true" 
              createHigherPrimitives="true" 
              removeEmptySVGG="true" 
              minLinesInPolyline="8"
              joinPolylines="true" 
              enforceVisibility="true"
              />
          <pageWriter filename="target/pathNorm99.svg"/>              
          <whitespaceChunker depth="3"/>
          <pageWriter filename="target/whiteSpace99.svg"/>              
          <deleteNodes xpath="//svg:rect[@title='leafNodes']"/>
          <pageWriter filename="target/textChunker99.svg"/>              
          <chunkAnalyzer xpath="//svg:g[@LEAF]" 
              subSup="true" 
              removeNumericTSpans="true"
              splitAtSpaces="true"/>
          <pageWriter filename="target/subSup.svg"/>
          <deleteNodes xpath="//@*[local-name()='oldFontSize' or local-name()='physicalStyle']"/>
          <pageNormalizer 
              removeUnitTransforms="true"
              formatDecimalPlaces="3"/>
          <pageWriter filename="${p.root}end.svg"/>
        </pageAnalyzer>
      </pageIterator>
      <documentWriter filename="${d.outDir}" format="htmlMenu" regex="((.*chunk.*\.xml)|(.*figure.*\.svg))"/>
    </documentActionList> 
  </documentIterator>
</semanticDocument>



